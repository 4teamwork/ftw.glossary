<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="ftw.glossary">
<body>

<metal:content-core fill-slot="content-core">
    <metal:content-core define-macro="content-core">

    <h1 i18n:translate="title_glossary">Glossary</h1>
    <a href="" class="glossary-index-links" tal:attributes="href string:${context/absolute_url}/${view/__name__}?index=0">0-9</a>
    <tal:alphabetical-index tal:repeat="letter python:map(chr, range(65, 91))">
        <a href="" class="glossary-index-links" tal:attributes="href string:${context/absolute_url}/${view/__name__}?index=${letter}" tal:content="letter">A</a>
    </tal:alphabetical-index>
    <br/><br/>

    <form method="post" 
          tal:attributes="action string:${context/absolute_url}/${view/__name__}">
        <input type="hidden" name="form.submitted:boolean" value="True" />
        <input name="glossary-search-field" type="text"/>
        <input name="glossary-search-button" type="submit" class="allowMultiSubmit" value="Search" i18n:attributes="value"/>
    </form>

        <script type="text/javascript"
            tal:content="string:jq('input[name=glossary-search-field]').autocomplete(
                {source:'${context/absolute_url}/${view/__name__}/matching_terms'});">
        </script>

    <div id="search-results">
        <dl tal:define="terms view/get_glossary_items">
            <tal:items tal:repeat="item terms">
            <dt><a href="" tal:content="item/getTerm" tal:attributes="href string:edit"/></dt>
            <dd tal:content="structure item/getDescription"/>
            </tal:items>
        </dl>
    </div>

    <script type="text/javascript" tal:content="structure view/ajax_search_js"/>
    
    </metal:content-core>
</metal:content-core>

</body>
</html>



